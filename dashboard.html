
<!-- (This would be appended inside dashboard.html body content where suitable) -->
<div class="filters" style="margin-top: 40px;">
  <h3>ğŸ‘¥ Manage Staff Passwords</h3>
  <table id="staffTable">
    <thead>
      <tr><th>Staff ID</th><th>Reset Password</th></tr>
    </thead>
    <tbody>
      <tr>
        <td>001</td>
        <td><button onclick="openResetModal('001')">Reset</button></td>
      </tr>
      <tr>
        <td>002</td>
        <td><button onclick="openResetModal('002')">Reset</button></td>
      </tr>
      <!-- More rows will be loaded dynamically -->
    </tbody>
  </table>
</div>

<!-- Modal -->
<div id="resetModal" style="display:none; position:fixed; top:20%; left:50%; transform:translateX(-50%); background:#fff; padding:20px; box-shadow:0 0 10px #000; border-radius:8px; z-index:999;">
  <h4>Reset Password for Staff ID: <span id="resetStaffId"></span></h4>
  <input type="password" id="newPassword" placeholder="New Password" />
  <input type="password" id="confirmPassword" placeholder="Confirm Password" />
  <br/><br/>
  <button onclick="submitReset()">Save</button>
  <button onclick="closeResetModal()">Cancel</button>
</div>

<script>
function openResetModal(staffId) {
  document.getElementById("resetStaffId").innerText = staffId;
  document.getElementById("resetModal").style.display = "block";
}

function closeResetModal() {
  document.getElementById("resetModal").style.display = "none";
  document.getElementById("newPassword").value = "";
  document.getElementById("confirmPassword").value = "";
}

function submitReset() {
  const staffId = document.getElementById("resetStaffId").innerText;
  const newPass = document.getElementById("newPassword").value;
  const confirmPass = document.getElementById("confirmPassword").value;

  if (!newPass || !confirmPass) {
    alert("Both fields are required!");
    return;
  }
  if (newPass !== confirmPass) {
    alert("Passwords do not match!");
    return;
  }

  fetch("https://script.google.com/macros/s/YOUR_RESET_PASSWORD_SCRIPT/exec", {
    method: "POST",
    body: new URLSearchParams({
      action: "resetPassword",
      staffId: staffId,
      newPassword: newPass
    })
  })
  .then(res => res.text())
  .then(txt => {
    alert("âœ… " + txt);
    closeResetModal();
  })
  .catch(err => {
    alert("âŒ Error: " + err.message);
  });
}
</script>
